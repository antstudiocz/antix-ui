---
description: Pravidla pro lokalizaci a internacionalizaci
globs: 
alwaysApply: false
---
# Antix UI - Internacionalizace a lokalizace ğŸŒ

## ZÃ¡kladnÃ­ principy

Antix UI pouÅ¾Ã­vÃ¡ knihovnu `i18next` pro internacionalizaci (i18n) a lokalizaci (l10n) komponent. Tento pÅ™Ã­stup zajiÅ¡Å¥uje, Å¾e komponenty mohou bÃ½t snadno pouÅ¾ity v rÅ¯znÃ½ch jazykovÃ½ch verzÃ­ch a lze je pÅ™izpÅ¯sobit rÅ¯znÃ½m kulturnÃ­m zvyklostem.

## Struktura i18n

### AdresÃ¡Å™ovÃ¡ struktura

```
src/
â””â”€â”€ translations/
    â”œâ”€â”€ i18n.ts              # KonfiguraÄnÃ­ soubor pro i18next
    â””â”€â”€ locales/             # AdresÃ¡Å™ pro pÅ™eklady
        â”œâ”€â”€ cs/              # ÄŒeÅ¡tina
        â”‚   â”œâ”€â”€ common.json  # SdÃ­lenÃ© pÅ™eklady
        â”‚   â””â”€â”€ button.json  # PÅ™eklady specifickÃ© pro Button
        â””â”€â”€ en/              # AngliÄtina
            â”œâ”€â”€ common.json  # SdÃ­lenÃ© pÅ™eklady
            â””â”€â”€ button.json  # PÅ™eklady specifickÃ© pro Button
```

### KonfiguraÄnÃ­ soubor i18n.ts

ZÃ¡kladnÃ­ konfigurace i18next:

```typescript
// src/translations/i18n.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

// Importy pÅ™ekladÅ¯
import csCommon from './locales/cs/common.json';
import csButton from './locales/cs/button.json';
import enCommon from './locales/en/common.json';
import enButton from './locales/en/button.json';

// NastavenÃ­ i18next
i18n
  .use(initReactI18next)
  .init({
    resources: {
      cs: {
        common: csCommon,
        button: csButton,
      },
      en: {
        common: enCommon,
        button: enButton,
      },
    },
    lng: 'cs', // VÃ½chozÃ­ jazyk
    fallbackLng: 'en', // ZÃ¡loÅ¾nÃ­ jazyk
    interpolation: {
      escapeValue: false, // NenÃ­ potÅ™eba escapovat hodnoty v Reactu
    },
    defaultNS: 'common', // VÃ½chozÃ­ namespace
    keySeparator: '.', // OddÄ›lovaÄ klÃ­ÄÅ¯ v hierarchii
  });

export default i18n;
```

## Organizace pÅ™ekladÅ¯

### Struktura pÅ™ekladovÃ½ch souborÅ¯

PÅ™eklady by mÄ›ly bÃ½t rozdÄ›leny do logickÃ½ch celkÅ¯ (namespaces):

1. **common.json** - sdÃ­lenÃ© a obecnÃ© pÅ™eklady
2. **[componentName].json** - pÅ™eklady specifickÃ© pro danou komponentu

```json
// src/translations/locales/cs/button.json
{
  "text": "TlaÄÃ­tko",
  "loading": "NaÄÃ­tÃ¡nÃ­...",
  "submit": "Potvrdit",
  "cancel": "ZruÅ¡it",
  "variants": {
    "primary": "PrimÃ¡rnÃ­",
    "secondary": "SekundÃ¡rnÃ­",
    "text": "TextovÃ©"
  }
}
```

```json
// src/translations/locales/en/button.json
{
  "text": "Button",
  "loading": "Loading...",
  "submit": "Submit",
  "cancel": "Cancel",
  "variants": {
    "primary": "Primary",
    "secondary": "Secondary",
    "text": "Text"
  }
}
```

### Konvence pojmenovÃ¡nÃ­ klÃ­ÄÅ¯

1. **Hierarchie** - pouÅ¾Ã­vejte teÄkovou notaci pro hierarchii:
   ```json
   {
     "nav": {
       "home": "DomÅ¯",
       "about": "O nÃ¡s",
       "contact": "Kontakt"
     }
   }
   ```

2. **SpecifiÄnost** - klÃ­Äe by mÄ›ly bÃ½t dostateÄnÄ› specifickÃ©, aby se pÅ™edeÅ¡lo konfliktÅ¯m:
   ```json
   {
     "button": {
       "submit": "Potvrdit",
       "cancel": "ZruÅ¡it"
     },
     "form": {
       "submit": "Odeslat",
       "cancel": "ZruÅ¡it formulÃ¡Å™"
     }
   }
   ```

3. **Konzistence** - podobnÃ© koncepty by mÄ›ly bÃ½t pojmenovÃ¡ny konzistentnÄ›:
   ```json
   {
     "actions": {
       "save": "UloÅ¾it",
       "edit": "Upravit",
       "delete": "Smazat"
     }
   }
   ```

## PouÅ¾Ã­vÃ¡nÃ­ pÅ™ekladÅ¯ v komponentÃ¡ch

### ZÃ¡kladnÃ­ pouÅ¾itÃ­

PouÅ¾itÃ­ `useTranslation` hooku:

```tsx
import React from 'react';
import { useTranslation } from 'react-i18next';
import styles from './Button.module.css';

export const Button: React.FC<ButtonProps> = (props) => {
  // PouÅ¾itÃ­ pro konkrÃ©tnÃ­ namespace
  const { t } = useTranslation('button');
  
  return (
    <button className={styles.button}>
      {t('text')}
    </button>
  );
};
```

### PouÅ¾Ã­vÃ¡nÃ­ namespaces

Pro lepÅ¡Ã­ organizaci pouÅ¾Ã­vejte namespaces odpovÃ­dajÃ­cÃ­ komponentÃ¡m:

```tsx
// ZÃ¡kladnÃ­ namespace
const { t } = useTranslation('common');
t('actions.save'); // -> "UloÅ¾it"

// KomponentovÃ½ namespace
const { t } = useTranslation('button');
t('submit'); // -> "Potvrdit"
```

### Interpolace hodnot

VklÃ¡dÃ¡nÃ­ dynamickÃ½ch hodnot do pÅ™ekladÅ¯:

```tsx
// V pÅ™ekladu:
// "welcome": "VÃ­tejte, {{name}}!"

const { t } = useTranslation();
t('welcome', { name: 'Jan' }); // -> "VÃ­tejte, Jan!"
```

### Pluralizace

Podpora plurÃ¡lÅ¯:

```json
// cs.json
{
  "items": "{{count}} poloÅ¾ka",
  "items_plural": "{{count}} poloÅ¾ky",
  "items_plural_2": "{{count}} poloÅ¾ek"
}
```

```tsx
const { t } = useTranslation();
t('items', { count: 1 }); // -> "1 poloÅ¾ka"
t('items', { count: 3 }); // -> "3 poloÅ¾ky"
t('items', { count: 5 }); // -> "5 poloÅ¾ek"
```

## KomponentnÃ­ pÅ™Ã­stup

### PÅ™edÃ¡vÃ¡nÃ­ namespace

```tsx
export interface ProductCardProps {
  // ...ostatnÃ­ props
  translationNamespace?: string;
}

export const ProductCard: React.FC<ProductCardProps> = ({
  // ...ostatnÃ­ props
  translationNamespace = 'productCard',
}) => {
  const { t } = useTranslation(translationNamespace);
  
  return (
    // ...implementace vyuÅ¾Ã­vajÃ­cÃ­ t() funkci
  );
};
```

### Trans komponenta pro komplexnÃ­ pÅ™eklady

Pro sloÅ¾itÄ›jÅ¡Ã­ pÅ™eklady obsahujÃ­cÃ­ JSX:

```tsx
import { Trans } from 'react-i18next';

// V pÅ™ekladu:
// "agreement": "SouhlasÃ­m s <link>podmÃ­nkami</link> sluÅ¾by"

const MyComponent = () => {
  return (
    <Trans i18nKey="agreement" ns="form">
      SouhlasÃ­m s <a href="/terms">podmÃ­nkami</a> sluÅ¾by
    </Trans>
  );
};
```

## DynamickÃ© naÄÃ­tÃ¡nÃ­ pÅ™ekladÅ¯

Pro vÄ›tÅ¡Ã­ aplikace je vhodnÃ© naÄÃ­tat pÅ™eklady dynamicky:

```typescript
// src/translations/i18n.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .use(initReactI18next)
  .init({
    lng: 'cs',
    fallbackLng: 'en',
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
    },
    // dalÅ¡Ã­ konfigurace
  });

export default i18n;
```

## Integrace a11y (pÅ™Ã­stupnosti)

PouÅ¾Ã­vejte sprÃ¡vnÃ© atributy pro pÅ™Ã­stupnost:

```tsx
<button 
  aria-label={t('button.ariaLabels.close')} 
  title={t('button.tooltips.close')}
>
  <CloseIcon />
</button>
```

## TestovÃ¡nÃ­ s i18n

### Setup pro testy

```typescript
// src/testUtils.tsx
import React from 'react';
import { render } from '@testing-library/react';
import { I18nextProvider } from 'react-i18next';
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

// Inicializace testovacÃ­ instance i18n
i18n
  .use(initReactI18next)
  .init({
    lng: 'cs',
    fallbackLng: 'en',
    resources: {
      cs: {
        common: require('./translations/locales/cs/common.json'),
        button: require('./translations/locales/cs/button.json'),
      },
      en: {
        common: require('./translations/locales/en/common.json'),
        button: require('./translations/locales/en/button.json'),
      },
    },
    interpolation: {
      escapeValue: false,
    },
  });

// Custom render s I18nextProvider
export const renderWithI18n = (ui: React.ReactElement) => {
  return render(
    <I18nextProvider i18n={i18n}>{ui}</I18nextProvider>
  );
};
```

### PouÅ¾itÃ­ v testech

```typescript
import { renderWithI18n } from '../../testUtils';
import Button from '../Button';

describe('Button', () => {
  it('displays translated text', () => {
    const { getByText } = renderWithI18n(<Button />);
    expect(getByText('TlaÄÃ­tko')).toBeInTheDocument();
  });
});
```

## Best Practices

1. **Separace textu** - vÅ¡echny texty by mÄ›ly bÃ½t v pÅ™ekladovÃ½ch souborech, nikoli hardcoded v komponentÃ¡ch
2. **Konzistence** - pouÅ¾Ã­vejte konzistentnÃ­ klÃ­Äe napÅ™Ã­Ä aplikacÃ­
3. **KontextovÃ© informace** - pÅ™idÃ¡vejte komentÃ¡Å™e pro pÅ™ekladatele v pÅ™ekladovÃ½ch souborech
4. **VÃ½chozÃ­ pÅ™eklady** - vÅ¾dy poskytnÄ›te pÅ™eklady alespoÅˆ v jednom jazyce (ideÃ¡lnÄ› v angliÄtinÄ›) jako vÃ½chozÃ­
5. **KomplexnÃ­ frÃ¡ze** - pro sloÅ¾itÃ© frÃ¡ze pouÅ¾Ã­vejte Trans komponentu mÃ­sto interpolace
6. **TestovÃ¡nÃ­** - testujte komponenty s rÅ¯znÃ½mi jazykovÃ½mi verzemi
7. **FormÃ¡tovÃ¡nÃ­** - pro formÃ¡tovÃ¡nÃ­ dat, ÄÃ­sel a mÄ›n pouÅ¾Ã­vejte lokalizaÄnÃ­ funkce 